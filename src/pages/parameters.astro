---
import BaseLayout from "../layouts/BaseLayout.astro";
import SectionCard from "../components/SectionCard.astro";
import BackButton from "../components/BackButton.astro";
import params from "../assets/params.json";

// Type the params properly
const typedParams = params as Record<string, Record<string, string | number>>;
---

<BaseLayout title="Pipeline Parameters - nf-core/tfactivity report" active="parameters">
  <div class="max-w-4xl mx-auto px-4 py-6">
    <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Pipeline Parameters</h1>
    
    <p class="text-gray-600 text-center mb-8">
      Configuration parameters used for this nf-core/tfactivity pipeline run
    </p>
    <p class="text-gray-600 text-center mb-8">
        If you want to learn more about the parameters available in this pipeline, please refer to the <a href="https://nf-co.re/tfactivity/dev/parameters" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 underline">pipeline documentation</a>.
    </p>

    <div class="space-y-8">
      {Object.entries(typedParams).map(([sectionName, sectionParams]) => (
        <SectionCard title={sectionName}>
          <div class="space-y-3">
            {Object.entries(sectionParams).map(([paramKey, paramValue]) => (
              <div class="flex flex-col sm:flex-row sm:justify-between border-b border-gray-100 pb-3 last:border-b-0 last:pb-0">
                <dt class="font-medium text-gray-700 mb-1 sm:mb-0">{paramKey}</dt>
                <dd class="text-gray-900 font-mono text-sm break-all max-w-md">
                  {typeof paramValue === 'string' && (paramValue.startsWith('http://') || paramValue.startsWith('https://')) ? (
                    <a href={paramValue} target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 underline">
                      {paramValue}
                    </a>
                  ) : (
                    String(paramValue)
                  )}
                </dd>
              </div>
            ))}
          </div>
        </SectionCard>
      ))}
    </div>

    <!-- Back to Rankings Button -->
    <div class="mt-12 text-center">
      <BackButton />
    </div>
  </div>
</BaseLayout>