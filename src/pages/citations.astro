---
import "../styles/global.css";
import logo from "../assets/images/nf-core-tfactivity_logo_light.png";
import metadata from "../assets/metadata.json";

const bibliographyHtml: string = (metadata as any)?.methods_description?.tool_bibliography || "";
const contributors: any[] = (metadata as any)?.methods_description?.manifest_map?.contributors || [];
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Citations - nf-core/tfactivity report</title>
  </head>
  <body class="bg-gray-50">
    <div class="max-w-6xl mx-auto py-8 px-4">
      <div class="flex justify-center py-8">
        <img src={logo.src} alt="nf-core/tfactivity Pipeline Logo" class="h-40 w-auto" />
      </div>

      <!-- Navigation -->
      <div class="max-w-4xl mx-auto px-4 mb-8">
        <nav class="flex justify-center space-x-6">
          <a href="/index.html" class="text-blue-600 hover:text-blue-800 font-medium">Rankings</a>
          <a href="/parameters/index.html" class="text-blue-600 hover:text-blue-800 font-medium">Parameters</a>
          <a href="/citations/index.html" class="text-gray-800 font-bold">Citations</a>
          <a href="https://nf-co.re/tfactivity/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 font-medium inline-flex items-center">
            Documentation
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
            </svg>
          </a>
        </nav>
      </div>

      <div class="max-w-4xl mx-auto px-4 py-6">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Citations</h1>
        <p class="text-gray-600 text-center mb-8">Please cite the following tools and resources used in this analysis.</p>

        <!-- Contributors -->
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden mb-8">
          <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <h2 class="text-xl font-semibold text-gray-800">Contributors</h2>
          </div>
          <div class="px-6 py-4">
            {contributors.length === 0 ? (
              <p class="text-gray-600">No contributor information available.</p>
            ) : (
              <ul class="space-y-4">
                {contributors.map((c: any) => (
                  <li class="border border-gray-100 rounded-md p-4">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                      <div>
                        <div class="text-lg font-semibold text-gray-900">{c.name}</div>
                        {c.affiliation && (
                          <div class="text-gray-600">{c.affiliation}</div>
                        )}
                        {Array.isArray(c.contribution) && c.contribution.length > 0 && (
                          <div class="mt-1">
                            <span class="text-xs uppercase tracking-wide text-gray-500">Roles:</span>
                            <span class="ml-2 text-sm text-gray-700">{c.contribution.join(", ")}</span>
                          </div>
                        )}
                      </div>
                      <div class="mt-3 sm:mt-0 flex flex-wrap items-center gap-3">
                        {c.orcid && (
                          <a href={`https://orcid.org/${c.orcid}`} target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 text-sm underline">ORCID</a>
                        )}
                        {c.github && (
                          <a href={`https://github.com/${c.github}`} target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 text-sm underline">GitHub</a>
                        )}
                        {c.email && (
                          <a href={`mailto:${c.email}`} class="text-blue-600 hover:text-blue-800 text-sm underline">Email</a>
                        )}
                      </div>
                    </div>
                  </li>
                ))}
              </ul>
            )}
          </div>
        </div>

        <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden">
          <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <h2 class="text-xl font-semibold text-gray-800">Bibliography</h2>
          </div>
          <div class="px-6 py-4">
            <ul class="list-disc list-outside pl-6 space-y-2 prose">
              <Fragment set:html={bibliographyHtml} />
            </ul>
          </div>
        </div>

        <!-- Back to Rankings Button -->
        <div class="mt-12 text-center">
          <a 
            href="/" 
            class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"
          >
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            Back to Rankings
          </a>
        </div>
      </div>
    </div>
  </body>
</html>

<style>
  html {
    font-family: system-ui, sans-serif;
  }
  .prose li { margin-bottom: 0.5rem; }
  .prose a { color: #2563eb; }
  .prose a:hover { color: #1e40af; }
  .prose em { font-style: italic; }
</style>

